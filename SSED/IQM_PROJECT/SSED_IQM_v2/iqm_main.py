# rcis_main.py
from find_first_file import find_first_file
from automate_evaluation_and_integration import automate_evaluation_and_integration

def main():
    stream_file_folder = "/home/buster/UOX1/different_index_params/3x3_retry"
    cellfile_path = find_first_file(stream_file_folder, ".cell")
    pdb_file = find_first_file(stream_file_folder, ".pdb")
    weights_list = [(2, 2, 3, -1, 1, -1, 1, 1, -1),
                    (1, 3, 3, -1, 1, -1, 1, 1, -1),
                    (1, 2, 4, -1, 1, -1, 1, 1, -1),
                    (1, 2, 3, -2, 1, -1, 1, 1, -1),
                    (1, 2, 3, -1, 2, -1, 1, 1, -1),
                    (1, 2, 3, -1, 1, -2, 1, 1, -1),
                    (1, 2, 3, -1, 1, -1, 2, 1, -1),
                    (1, 2, 3, -1, 1, -1, 1, 2, -1),
                    (1, 2, 3, -1, 1, -1, 1, 1, -2),
                    (0, 2, 3, -1, 1, -1, 1, 1, -1),
                    (1, 1, 3, -1, 1, -1, 1, 1, -1),
                    (1, 2, 2, -1, 1, -1, 1, 1, -1),
                    (1, 2, 3, -0, 1, -1, 1, 1, -1),
                    (1, 2, 3, -1, 0, -1, 1, 1, -1),
                    (1, 2, 3, -1, 1, -0, 1, 1, -1),
                    (1, 2, 3, -1, 1, -1, 0, 1, -1),
                    (1, 2, 3, -1, 1, -1, 1, 0, -1),
                    (1, 2, 3, -1, 1, -1, 1, 1, -0),
                    (2, 2, 3, -1, 1, -1, 1, 1, -1),
                    (3, 3, 4, -1, 1, -1, 2, 2, -1),
                    (5, 3, 6, -2, 2, -1, 1, 3, -1),
                    (4, 4, 5, -1, 1, -2, 3, 2, -1),
                    (3, 3, 3, -3, 2, -1, 4, 1, -2),
                    (2, 4, 6, -1, 1, -3, 2, 3, -1),
                    (4, 2, 5, -1, 3, -1, 2, 2, -3),
                    (3, 5, 3, -2, 1, -1, 5, 1, -2),
                    (2, 4, 4, -1, 2, -3, 3, 1, -1),
                    (5, 3, 4, -3, 2, -2, 4, 1, -1),
                    (3, 3, 3, -2, 1, -1, 3, 2, -3),
                    (4, 5, 4, -1, 2, -3, 2, 1, -2),
                    (3, 2, 6, -2, 1, -1, 4, 3, -3),
                    (3, 4, 3, -1, 3, -2, 5, 2, -1),
                    (5, 2, 5, -1, 1, -3, 4, 3, -2),
                    (4, 3, 6, -1, 2, -1, 5, 1, -3),
                    (3, 5, 4, -1, 3, -3, 2, 2, -1),
                    (3, 4, 3, -2, 1, -2, 5, 1, -3),
                    (2, 5, 4, -1, 3, -2, 3, 2, -3),
                    (3, 3, 5, -2, 2, -1, 4, 1, -3),
                    (5, 4, 3, -1, 1, -3, 2, 3, -2),
                    (4, 3, 4, -1, 3, -2, 5, 1, -2),
                    (2, 5, 3, -1, 2, -3, 4, 3, -1),
                    (4, 2, 6, -3, 1, -1, 5, 2, -1),
                    (5, 3, 5, -2, 2, -3, 2, 1, -2),
                    (3, 5, 6, -1, 3, -2, 3, 2, -1),
                    (4, 3, 3, -3, 1, -2, 4, 2, -3),
                    (5, 2, 4, -1, 3, -1, 5, 1, -2),
                    (3, 3, 6, -2, 2, -3, 4, 1, -1),
                    (5, 4, 4, -1, 1, -2, 3, 3, -3),
                    (4, 3, 5, -1, 2, -3, 2, 2, -1),
                    (3, 5, 3, -3, 1, -1, 4, 3, -2),
                    (2, 4, 4, -2, 3, -3, 5, 2, -1),
                    (3, 3, 5, -1, 2, -1, 3, 3, -3),
                    (5, 2, 4, -3, 1, -3, 4, 1, -2),
                    (3, 3, 3, -2, 1, -2, 5, 2, -1),
                    (2, 4, 6, -1, 3, -1, 4, 2, -3),
                    (4, 5, 3, -1, 2, -3, 3, 1, -2),
                    (3, 4, 5, -2, 1, -2, 4, 3, -1),
                    (5, 3, 4, -3, 2, -1, 5, 1, -2),
                    (3, 2, 6, -1, 3, -3, 4, 2, -1),
                    (4, 3, 3, -2, 1, -2, 5, 3, -1),
                    (3, 5, 4, -1, 2, -3, 2, 1, -3),
                    (2, 4, 5, -1, 1, -3, 5, 2, -1),
                    (5, 2, 4, -3, 2, -1, 4, 1, -3),
                    (3, 3, 3, -1, 3, -2, 5, 2, -1),
                    (4, 4, 5, -2, 1, -3, 3, 1, -2),
                    (5, 2, 3, -3, 2, -2, 4, 1, -3),
                    (3, 3, 4, -1, 1, -3, 5, 3, -2),
                    (2, 4, 6, -3, 2, -2, 4, 1, -1)
                    ] 
    lattice = "oI"  # Pearson Symbol read from .cell file first letter for lattice type and second for centering
    ring_size = [(3, 4, 7)]
    pointgroup = "mmm"
    num_threads = 23
    bins = 20
    min_res = 1.5
    iterations = 3

    automate_evaluation_and_integration(stream_file_folder, weights_list, lattice, ring_size, cellfile_path, pointgroup, num_threads, bins, pdb_file, min_res, iterations)

if __name__ == "__main__":
    main()
